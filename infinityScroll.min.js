/**
* Infinity Scroll
* @author Carlos Vinicius
* @version 2.4
* @date 2012-10-18
*/
"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
jQuery.fn.infinityScroll=function(m){var c,d,a,e,f,b,i,j,g;c=function(a,c){"object"==typeof console&&console.log("!\n[Infinity Scroll - "+(c||"Erro")+"] "+a)};d=jQuery.extend({toTop:"#returnToTop",lastShelf:">div:last",elemLoading:'<div id="scrollLoading">Carregando ... </div>',searchUrl:null,callback:function(){},getShelfHeight:function(){return a.scrollTop()+a.height()}},m);a=jQuery(this);jQuery("");if(1>a.length)return a;1<a.length&&(c("Identifiquei que a seletor informado ("+a.selector+") retornou "+
a.length+" elementos.\n Como correto, selecionado o primeiro com o id: #"+(a.filter("[id^=ResultItems]:first").attr("id")||"!Not Found"),"Aviso"),a=a.filter("[id^=ResultItems]:first"));a.filter("[id^=ResultItems]").length||c("Certifique-se que esta selecionando o elemento correto.\n O plugin espera que o elemento seja o que cont\u00e9m o id: #"+jQuery("div[id^=ResultItems]").attr("id")||"!Not Found","Aviso");a.parent().filter("[id^=ResultItems]").length&&(c("Identifiquei que o seletor pai do elemento que voc\u00ea informou \u00e9 o #"+
(jQuery("div[id^=ResultItems]").attr("id")||"!Not Found")+".\n Como forma de corrigir esse problema de sele\u00e7\u00e3o de elemento, assumirei prateleira correta.","Aviso"),a=a.parent());e=jQuery(window);f=jQuery(document);b=jQuery(d.toTop);i=jQuery(d.elemLoading);j=!0;g=2;var l={scrollToTop:function(){var a=e.height();e.bind("resize",function(){a=e.height()});e.bind("scroll",function(){f.scrollTop()>a?b.stop(!0).fadeTo(300,1,function(){b.show()}):b.stop(!0).fadeTo(300,0,function(){b.hide()})});
b.find("a").bind("click",function(){jQuery("html,body").animate({scrollTop:0},"slow");return!1})},getSearchUrl:function(){var a,d,e;jQuery("script:not([src])").each(function(){d=jQuery(this)[0].innerHTML;e=/\/buscapagina\?.+&PageNumber=/i;if(-1<d.search(/\/buscapagina\?/i))return a=e.exec(d),!1});if("undefined"!==typeof a&&"undefined"!==typeof a[0])return a[0];c("N\u00e3o foi poss\u00edvel localizar a url de busca da p\u00e1gina.\n Tente adicionar o .js ao final da p\u00e1gina. \n[M\u00e9todo: getSearchUrl]");
return""},infinityScroll:function(){var b=jQuery(".pager[id*=PagerTop]:first").attr("id")||"";if(""===b)return c("N\u00e3o foi poss\u00edvel localizar o div.pages contendo o atributo id*=PagerTop"),"";var k,f,h;k=window["pagecount_"+b.split("_").pop()];f=null!==d.searchUrl?d.searchUrl:l.getSearchUrl();h=!0;"undefined"===typeof k&&c("N\u00e3o foi poss\u00edvel localizar quantidade de p\u00e1ginas.\n Tente adicionar o .js ao final da p\u00e1gina. \n[M\u00e9todo: infinityScroll]");e.bind("scroll",function(){if(g<=
k&&j){if(e.scrollTop()+e.height()>=d.getShelfHeight()&&h){var b=a.find(d.lastShelf);if(1>b.length)return c("\u00daltima Prateleira/Vitrine n\u00e3o encontrada \n ("+b.selector+")"),!1;b.after(i);h=!1;jQuery.ajax({url:f+g,success:function(a){1>a.trim().length?(j=!1,c("N\u00e3o existem mais resultados a partir da p\u00e1gina: "+g,"Aviso")):b.after(a);h=!0;i.remove()},error:function(){c("Houve um erro na requisi\u00e7\u00e3o Ajax de uma nova p\u00e1gina.")},complete:function(){d.callback()}});g++}}else return!1})}};
l.scrollToTop();l.infinityScroll();return a};
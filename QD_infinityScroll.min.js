/**
* Infinity Scroll
* @author Carlos Vinicius [Quatro Digital]
* @version 3.11
* @license MIT
*/
"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
(function(c){"function"!==typeof c.fn.QD_infinityScroll&&(window._QuatroDigital_InfinityScroll=window._QuatroDigital_InfinityScroll||{},c.fn.QD_infinityScroll=function(t){var h,f,e,a,g,r,k,b,l;b=window._QuatroDigital_InfinityScroll;f=function(b,d){if("object"===typeof console&&"undefined"!==typeof console.error&&"undefined"!==typeof console.info&&"undefined"!==typeof console.warn){var a;"object"===typeof b?(b.unshift("[Infinity Scroll]\n"),a=b):a=["[Infinity Scroll]\n"+b];if("undefined"===typeof d||
"alerta"!==d.toLowerCase()&&"aviso"!==d.toLowerCase())if("undefined"!==typeof d&&"info"===d.toLowerCase())try{console.info.apply(console,a)}catch(c){try{console.info(a.join("\n"))}catch(e){}}else try{console.error.apply(console,a)}catch(f){try{console.error(a.join("\n"))}catch(g){}}else try{console.warn.apply(console,a)}catch(u){try{console.warn(a.join("\n"))}catch(k){}}}};h={lastShelf:">div:last",elemLoading:'<div id="scrollLoading">Carregando ... </div>',searchUrl:null,returnToTop:c('<div id="returnToTop"><a href="#"><span class="text">voltar ao</span><span class="text2">TOPO</span><span class="arrowToTop"></span></a></div>'),
scrollBy:document,callback:function(){},getShelfHeight:function(){return a.scrollTop()+a.height()},paginate:null,insertContent:function(b,a){b.after(a)},authorizeScroll:function(){return!0}};e=jQuery.extend({},h,t);a=jQuery(this);jQuery("");if(1>a.length)return a;1<a.length&&(f("Identifiquei que a seletor informado ("+a.selector+") retornou "+a.length+" elementos.\n Para solucionar o problema estou selecionando autom\u00e1ticamente o primeiro com o id: #"+(a.filter("[id^=ResultItems]:first").attr("id")||
"!Not Found"),"Aviso"),a=a.filter("[id^=ResultItems]:first"));a.filter("[id^=ResultItems]").length||f(["Certifique-se que esta selecionando o elemento correto.\n O plugin espera que o elemento seja o que cont\u00e9m o id: #"+(c("div[id^=ResultItems]").attr("id")||"!Not Found"),c("div[id^=ResultItems]")],"Info");a.parent().filter("[id^=ResultItems]").length&&(a=a.parent(),f(["Identifiquei que o seletor pai do elemento que voc\u00ea informou \u00e9 o #"+(jQuery("div[id^=ResultItems]").attr("id")||"!Not Found")+
".\n Como forma de corrigir esse problema de sele\u00e7\u00e3o de elemento, assumirei a prateleira correta.",a],"Aviso"));c("body").append(e.returnToTop);g=c(window);r=c(document);l=c(e.scrollBy);b.toTopE=c(e.returnToTop);k=c(e.elemLoading);b.moreResults=!0;b.currentPage=2;var q={scrollToTop:function(){var a,d,c;a=g.height();g.bind("resize.QD_infinityScroll",function(){a=g.height()});d=null;c=function(){r.scrollTop()>a?document.body.getAttribute("data-qd-infinity-scroll")||document.body.setAttribute("data-qd-infinity-scroll",
1):document.body.getAttribute("data-qd-infinity-scroll")&&document.body.removeAttribute("data-qd-infinity-scroll")};l.bind("scroll.QD_infinityScroll",function(){clearTimeout(d);d=setTimeout(c,20)});b.buttonToTop=b.toTopE.find("a").bind("click.QD_infinityScroll",function(){jQuery("html,body").animate({scrollTop:0},"slow");return!1})},getSearchUrl:function(){var b,a;jQuery("script:not([src])").each(function(){a=jQuery(this)[0].innerHTML;if(-1<a.indexOf("buscapagina"))return b=/\/buscapagina\?.+&PageNumber=/i.exec(a),
!1;if(-1<a.indexOf("paginaprateleira"))return b=/\/paginaprateleira\?.+PageNumber=/i.exec(a),!1;if(-1<a.indexOf("listapagina"))return b=a.match(/\/listapagina\?.+PageNumber=/ig),!1});if("undefined"!==typeof b&&"undefined"!==typeof b[0])return-1<b[0].indexOf("listapagina")?b.pop():b[0].replace("paginaprateleira","buscapagina");f("N\u00e3o foi poss\u00edvel localizar a url de busca da p\u00e1gina.\n Tente adicionar o .js ao final da p\u00e1gina. \n[M\u00e9todo: getSearchUrl]");return""},infinityScroll:function(){var m,
d,n,p,h;b.searchUrl=null!==e.searchUrl?e.searchUrl:q.getSearchUrl();b.currentStatus=!0;m=c(".pager[id*=PagerTop]:first").attr("id")||"";if(""!==m&&(b.pages=window["pagecount_"+m.split("_").pop()],"undefined"===typeof b.pages))for(n in window)if(/pagecount_[0-9]+/.test(n)){b.pages=window[n];break}"undefined"===typeof b.pages&&(b.pages=9999999999999);d=function(){if(b.currentStatus){var d=a.find(e.lastShelf);if(1>d.length)return f("\u00daltima Prateleira/Vitrine n\u00e3o encontrada \n ("+d.selector+
")"),!1;d.after(k);b.currentStatus=!1;var g=b.currentPage;c.ajax({url:b.searchUrl.replace(/pagenumber\=[0-9]*/i,"PageNumber="+b.currentPage),dataType:"html",success:function(a){1>a.trim().length?(b.moreResults=!1,f("N\u00e3o existem mais resultados a partir da p\u00e1gina: "+g,"Aviso"),c(window).trigger("QuatroDigital.is_noMoreResults")):e.insertContent(d,a);b.currentStatus=!0;k.remove()},error:function(){f("Houve um erro na requisi\u00e7\u00e3o Ajax de uma nova p\u00e1gina.")},complete:function(a,
b){e.callback();c(window).trigger("QuatroDigital.is_Callback")}});b.currentPage++}};"function"===typeof e.paginate?e.paginate(function(){b.currentPage<=b.pages&&b.moreResults&&d()}):(p=null,h=function(){b.currentPage<=b.pages&&b.moreResults&&g.scrollTop()+g.height()>=e.getShelfHeight()&&e.authorizeScroll()&&d()},l.bind("scroll.QD_infinityScroll_paginate",function(){clearTimeout(p);p=setTimeout(h,70)}))}};q.scrollToTop();q.infinityScroll();return a})})(jQuery);
